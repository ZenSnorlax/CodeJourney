
# C++ 的左值 (lvalue) 和右值 (rvalue)

## 1. 左值 (lvalue)
左值（即 "left value"）是指一个表达式，它**引用了内存中的某个对象**，并且可以通过这个表达式获取对象的地址。左值通常出现在赋值运算符的左侧，但不仅限于此。左值有持久性，在表达式结束后依然存在。

**特点：**
- 左值可以取地址（使用 `&` 操作符）。
- 左值可以被赋值。
- 常见的左值是变量、数组元素、结构体成员等。

**示例：**
```cpp
int x = 10;
x = 20;  // x 是一个左值
int* p = &x;  // 可以取 x 的地址
```

## 2. 右值 (rvalue)
右值（即 "right value"）是指一个**不引用内存中的对象的值**，它通常是一个临时值或常量，表达式结束后它的值即失效。右值通常出现在赋值运算符的右侧。

**特点：**
- 右值不能取地址（因为它没有持久性）。
- 右值通常不能被赋值（除非通过移动语义或通过 `const` 引用）。
- 常见的右值是字面常量、表达式的临时结果等。

**示例：**
```cpp
int y = 30;
y = x + 10;  // x + 10 是一个右值
int z = 42;  // 42 是一个右值
```

## 3. 左值和右值的区别
- **持久性**：左值通常在程序中是持久的，指向内存中的某个对象；而右值则是临时的，通常会在表达式结束后消失。
- **能否取地址**：左值可以通过 `&` 取地址，而右值不能取地址，因为右值通常没有内存位置。
- **赋值行为**：左值可以出现在赋值操作符的左边，右值则不能。

## 4. 右值引用和移动语义
C++11 引入了**右值引用 (rvalue reference)** 和**移动语义 (move semantics)**，让程序员能够更高效地管理资源。右值引用使用 `&&` 语法，它允许你捕获和操作右值。

**示例：**
```cpp
int a = 10;
int&& b = 20;  // b 是右值引用，引用临时右值 20
b = 30;  // 可以对右值引用进行修改
```

右值引用最常见的应用场景是实现**移动构造函数**和**移动赋值运算符**，这使得对象的资源可以被“移动”而不是拷贝，从而提高性能。

## 5. 常见示例
- **左值：** 变量、数组元素、对象的引用。
- **右值：** 字面常量、表达式的返回结果（如 `x + y`）、临时对象。

```cpp
int x = 5;    // x 是左值
int y = x + 2;  // x + 2 是右值
```

## 总结
- **左值 (lvalue)：** 引用内存中的对象，可以取地址，有持久性，能够被赋值。
- **右值 (rvalue)：** 临时值，无法取地址，无持久性，通常不能被赋值。
